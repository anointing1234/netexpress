{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Waybill Receipt - {{ courier.tracking_number }}</title>
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
</head>
<body>

<!-- Top message with tracking link -->
<div style="max-width: 700px; margin:auto; padding:15px; background:#fff; border:1px solid #ddd; text-align:center; margin-bottom:20px;">
    <p style="font-size:14px; margin:0; color:#333;">
        Dear {{ courier.receiver_name|default:"Customer" }}, your shipment with 
        <strong>Tracking ID: {{ courier.tracking_number }}</strong> has been processed.
        <br>
        You can check the real-time status here:  
        <a href="https://netexpressc.com/{% url 'tracking' %}?tracking_id={{ courier.tracking_number }}" 
           style="color:#007bff; text-decoration:none;" target="_blank">
           Track Your Package
        </a>
    </p>
</div>

<!-- Printable Receipt -->
<div id="print-receipt">
    <div style="width: 700px; margin: auto; padding: 25px; font-family: 'Arial', sans-serif; border: 1px solid #000; background-color: #fff;">
        
        <!-- Header -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <div style="flex-shrink: 0;">
                <img src="https://netexpressc.com/static/assets/img/logo_dark.png" alt="Company Logo" style="height: 55px;">
            </div>
            <div style="text-align: right;">
                <h2 style="color: #007bff; margin: 0;">Waybill Receipt</h2>
            </div>
        </div>

        <hr style="border: 2px solid #007bff; margin-bottom: 15px;">

        <!-- Sender & Recipient Table -->
        <table style="width: 100%; border-collapse: collapse; margin-bottom: 15px;">
            <tr style="background: #007bff; color: #000;">
                <th style="padding: 8px; width: 50%;">Sender</th>
                <th style="padding: 8px; width: 50%;">Recipient</th>
            </tr>
            <tr>
                <td style="padding: 6px; vertical-align: top; border: 1px solid #000;">
                    <strong>{{ courier.sender_name|default:"N/A" }}</strong><br>
                    {{ courier.sender_address|default:"N/A" }}<br>
                    {{ courier.sender_city|default:"N/A" }}, {{ courier.sender_country|default:"N/A" }}<br>
                    Email: {{ courier.sender_email|default:"N/A" }}<br>
                    Contact: {{ courier.sender_contact_number|default:"N/A" }}
                </td>
                <td style="padding: 6px; vertical-align: top; border: 1px solid #000;">
                    <strong>{{ courier.receiver_name|default:"N/A" }}</strong><br>
                    {{ courier.receiver_address|default:"N/A" }}<br>
                    {{ courier.receiver_city|default:"N/A" }}, {{ courier.receiver_country|default:"N/A" }}<br>
                    Email: {{ courier.receiver_email|default:"N/A" }}<br>
                    Contact: {{ courier.receiver_contact_number|default:"N/A" }}
                </td>
            </tr>
        </table>

        <!-- Shipment Details -->
        <table style="width: 100%; border-collapse: collapse; margin-bottom: 15px;">
            <tr style="background: #f2f2f2;">
                <th style="padding: 8px; text-align: left; width: 30%;">Tracking ID</th>
                <td style="padding: 8px; border: 1px solid #000;">{{ courier.tracking_number|default:"N/A" }}</td>
            </tr>
            <tr>
                <th style="padding: 8px; text-align: left;">Status</th>
                <td style="padding: 8px; border: 1px solid #000;">{{ courier.status|default:"N/A" }}</td>
            </tr>
            <tr style="background: #f2f2f2;">
                <th style="padding: 8px; text-align: left;">Trailer Number</th>
                <td style="padding: 8px; border: 1px solid #000;">{{ courier.trailer_number|default:"N/A" }}</td>
            </tr>
            <tr>
                <th style="padding: 8px; text-align: left;">Seal Number</th>
                <td style="padding: 8px; border: 1px solid #000;">{{ courier.seal_number|default:"N/A" }}</td>
            </tr>
            <tr style="background: #f2f2f2;">
                <th style="padding: 8px; text-align: left;">SCAC</th>
                <td style="padding: 8px; border: 1px solid #000;">{{ courier.scac|default:"N/A" }}</td>
            </tr>
        </table>

        <!-- Package Details -->
        <h3 style="margin-bottom: 8px; text-align: left;">Package Details</h3>
        <table style="width: 100%; border-collapse: collapse; border: 1px solid #000; margin-bottom: 15px;">
            <tr style="background: #000; color: #fff;">
                <th style="padding: 8px; border: 1px solid #000;">Item Description</th>
                <th style="padding: 8px; border: 1px solid #000;">Number of Items</th>
                <th style="padding: 8px; border: 1px solid #000;">Parcel Colour</th>
                <th style="padding: 8px; border: 1px solid #000;">Weight (kg)</th>
                <th style="padding: 8px; border: 1px solid #000;">Rate ($)</th>
                <th style="padding: 8px; border: 1px solid #000;">Category</th>
                <th style="padding: 8px; border: 1px solid #000;">Destination</th>
            </tr>
            <tr>
                <td style="padding: 6px; border: 1px solid #000;">{{ courier.item_description|default:"N/A" }}</td>
                <td style="padding: 6px; border: 1px solid #000;">{{ courier.number_of_items|default:"N/A" }}</td>
                <td style="padding: 6px; border: 1px solid #000;">{{ courier.parcel_colour|default:"N/A" }}</td>
                <td style="padding: 6px; border: 1px solid #000;">{{ courier.weight|default:"N/A" }}</td>
                <td style="padding: 6px; border: 1px solid #000;">{{ courier.rate|default:"0.00" }}</td>
                <td style="padding: 6px; border: 1px solid #000;">{{ courier.category|default:"N/A" }}</td>
                <td style="padding: 6px; border: 1px solid #000;">
                    {{ courier.destination_city|default:"N/A" }}, {{ courier.destination_country|default:"N/A" }}
                </td>
            </tr>
        </table>

        <!-- Timeline -->
        <table style="width: 100%; border-collapse: collapse; margin-bottom: 15px;">
            <tr style="background: #f2f2f2;">
                <th style="padding: 8px; text-align: left; width: 30%;">Date Sent</th>
                <td style="padding: 8px; border: 1px solid #000;">{{ courier.date_sent|date:"d M Y"|default:"N/A" }}</td>
            </tr>
            <tr>
                <th style="padding: 8px; text-align: left;">Estimated Delivery</th>
                <td style="padding: 8px; border: 1px solid #000;">{{ courier.estimated_delivery_date|date:"d M Y"|default:"N/A" }}</td>
            </tr>
        </table>

        <!-- Barcode -->
       <!-- Barcode -->
<div style="text-align: center; margin-top: 15px;">
    <img src="{{ barcode_url }}" alt="Barcode" style="max-width:280px; height:auto;">
</div>


        <!-- Signature Section -->
        <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
          <tr>
            <td style="width: 50%; padding: 15px; border-top: 1px solid #000; text-align: center;">
                <strong>Shipper Signature</strong><br>
                <img src="https://netexpressc.com/static/assets/img/shippment.png" alt="Shipper Signature" style="width:180px; height:50px; object-fit:contain;">
            </td>
            <td style="width: 50%; padding: 15px; border-top: 1px solid #000; text-align: center;">
                <strong>Carrier Signature</strong><br>
                <img src="https://netexpressc.com/static/assets/img/courier.png" alt="Carrier Signature" style="width:180px; height:50px; object-fit:contain;">
            </td>
          </tr>
        </table>

        <p style="text-align: center; font-size: 12px; color: #000; margin-top: 15px;">
          netexpressc.com
        </p>
    </div>
</div>

</body>
</html>
